<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stream Configuration - Live Test</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #333;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      color: white;
    }

    .header h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .nav-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 30px;
    }

    .nav-btn {
      padding: 12px 24px;
      background: white;
      color: #667eea;
      text-decoration: none;
      border-radius: 8px;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .nav-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .config-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .config-panel {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .panel-title {
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #333;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #555;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.3s;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .checkbox-group input[type="checkbox"] {
      width: auto;
    }

    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      color: white;
      margin-right: 10px;
      margin-bottom: 10px;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .btn-primary {
      background: #667eea;
    }

    .btn-success {
      background: #4CAF50;
    }

    .btn-warning {
      background: #FF9800;
    }

    .btn-danger {
      background: #f44336;
    }

    .btn-secondary {
      background: #6c757d;
    }

    .config-list {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      grid-column: 1 / -1;
    }

    .config-item {
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      transition: all 0.3s;
    }

    .config-item:hover {
      border-color: #667eea;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .config-header {
      display: flex;
      justify-content: between;
      align-items: center;
      margin-bottom: 10px;
    }

    .config-name {
      font-weight: bold;
      color: #333;
      font-size: 1.1rem;
    }

    .config-actions {
      display: flex;
      gap: 5px;
    }

    .config-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 10px;
      color: #666;
      font-size: 0.9rem;
    }

    .detail-item {
      display: flex;
      gap: 5px;
    }

    .detail-label {
      font-weight: 600;
    }

    .status-badge {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
    }

    .status-active {
      background: #d4edda;
      color: #155724;
    }

    .status-inactive {
      background: #f8d7da;
      color: #721c24;
    }

    .export-section {
      background: #f8f9fa;
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      margin-top: 20px;
    }

    .quick-test {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    .quick-test input {
      flex: 1;
      min-width: 200px;
    }

    @media (max-width: 768px) {
      .config-grid {
        grid-template-columns: 1fr;
      }

      .nav-buttons {
        flex-direction: column;
        align-items: center;
      }

      .quick-test {
        flex-direction: column;
      }

      .quick-test input {
        width: 100%;
      }
    }

    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      z-index: 1000;
      transform: translateX(400px);
      transition: all 0.3s;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast-success {
      background: #4CAF50;
    }

    .toast-error {
      background: #f44336;
    }

    .toast-info {
      background: #2196F3;
    }

    .advanced-options {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
    }

    .advanced-toggle {
      background: none;
      border: none;
      color: #667eea;
      cursor: pointer;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .advanced-content {
      display: none;
    }

    .advanced-content.show {
      display: block;
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <h1><i class="fas fa-cogs"></i> Stream Configuration</h1>
      <p>管理和配置直播流测试环境</p>
    </div>

    <div class="nav-buttons">
      <a href="index.html" class="nav-btn">
        <i class="fas fa-play"></i>
        返回播放器
      </a>
      <button class="nav-btn" id="importBtn">
        <i class="fas fa-upload"></i>
        导入配置
      </button>
      <button class="nav-btn" id="exportBtn">
        <i class="fas fa-download"></i>
        导出配置
      </button>
    </div>

    <div class="config-grid">
      <div class="config-panel">
        <h2 class="panel-title">
          <i class="fas fa-plus"></i>
          添加新配置
        </h2>

        <form id="configForm">
          <div class="form-group">
            <label for="configName">配置名称:</label>
            <input type="text" id="configName" placeholder="例如: 本地测试" required>
          </div>

          <div class="form-group">
            <label for="streamName">流名称:</label>
            <input type="text" id="streamName" placeholder="demo" required>
          </div>

          <div class="form-group">
            <label for="protocol">协议:</label>
            <select id="protocol">
              <option value="flv">FLV</option>
              <option value="hls">HLS</option>
              <option value="rtmp">RTMP</option>
              <option value="webrtc">WebRTC</option>
            </select>
          </div>

          <div class="form-group">
            <label for="serverUrl">服务器地址:</label>
            <input type="text" id="serverUrl" placeholder="localhost:8000" value="localhost:8000">
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="autoReconnect" checked>
            <label for="autoReconnect">自动重连</label>
          </div>

          <div class="checkbox-group">
            <input type="checkbox" id="lowLatency" checked>
            <label for="lowLatency">低延迟模式</label>
          </div>

          <button type="button" class="advanced-toggle" id="advancedToggle">
            <i class="fas fa-chevron-down"></i> 高级选项
          </button>

          <div class="advanced-content" id="advancedContent">
            <div class="form-group">
              <label for="bufferSize">缓冲区大小 (KB):</label>
              <input type="number" id="bufferSize" value="128" min="64" max="1024">
            </div>

            <div class="form-group">
              <label for="maxRetries">最大重试次数:</label>
              <input type="number" id="maxRetries" value="5" min="1" max="10">
            </div>

            <div class="form-group">
              <label for="customHeaders">自定义头部 (JSON):</label>
              <textarea id="customHeaders" rows="3" placeholder='{"Authorization": "Bearer token"}'></textarea>
            </div>

            <div class="form-group">
              <label for="description">描述:</label>
              <textarea id="description" rows="2" placeholder="配置的详细描述..."></textarea>
            </div>
          </div>

          <div style="margin-top: 20px;">
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i>
              保存配置
            </button>
            <button type="button" class="btn btn-secondary" id="resetForm">
              <i class="fas fa-undo"></i>
              重置
            </button>
          </div>
        </form>
      </div>

      <div class="config-panel">
        <h2 class="panel-title">
          <i class="fas fa-rocket"></i>
          快速测试
        </h2>

        <div class="form-group">
          <label>快速启动测试:</label>
          <div class="quick-test">
            <input type="text" id="quickStream" placeholder="输入流名称">
            <button class="btn btn-success" id="quickTestBtn">
              <i class="fas fa-play"></i>
              测试
            </button>
          </div>
        </div>

        <div class="form-group">
          <label>预设流:</label>
          <div>
            <button class="btn btn-primary" data-stream="demo">Demo</button>
            <button class="btn btn-primary" data-stream="test">Test</button>
            <button class="btn btn-primary" data-stream="live">Live</button>
          </div>
        </div>

        <div class="form-group">
          <label>服务状态检查:</label>
          <div>
            <button class="btn btn-warning" id="checkServerBtn">
              <i class="fas fa-heartbeat"></i>
              检查服务
            </button>
            <div id="serverStatus" style="margin-top: 10px;"></div>
          </div>
        </div>

        <div class="form-group">
          <label>生成推流命令:</label>
          <div>
            <button class="btn btn-secondary" id="generateCmdBtn">
              <i class="fas fa-terminal"></i>
              生成命令
            </button>
          </div>
          <div id="generatedCmd" style="margin-top: 10px; display: none;">
            <textarea id="cmdOutput" rows="4" readonly style="font-family: monospace; font-size: 12px;"></textarea>
            <button class="btn btn-secondary" id="copyCmdBtn">
              <i class="fas fa-copy"></i>
              复制
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="config-list">
      <h2 class="panel-title">
        <i class="fas fa-list"></i>
        配置列表
        <span style="margin-left: auto; font-size: 0.9rem; font-weight: normal;">
          <span id="configCount">0</span> 个配置
        </span>
      </h2>

      <div id="configItems">
        <!-- 配置项将在这里动态生成 -->
      </div>

      <div class="export-section">
        <i class="fas fa-file-export" style="font-size: 2rem; color: #6c757d; margin-bottom: 10px;"></i>
        <p style="color: #6c757d; margin-bottom: 15px;">
          导出所有配置为 JSON 文件，或从文件导入配置
        </p>
        <input type="file" id="importFile" accept=".json" style="display: none;">
        <button class="btn btn-secondary" id="selectFileBtn">
          <i class="fas fa-file-upload"></i>
          选择导入文件
        </button>
      </div>
    </div>
  </div>

  <script>
    class StreamConfigManager {
      constructor() {
        this.configs = this.loadConfigs();
        this.initializeElements();
        this.bindEvents();
        this.renderConfigs();
        this.loadDefaultConfigs();
      }

      initializeElements() {
        this.elements = {
          configForm: document.getElementById('configForm'),
          configName: document.getElementById('configName'),
          streamName: document.getElementById('streamName'),
          protocol: document.getElementById('protocol'),
          serverUrl: document.getElementById('serverUrl'),
          autoReconnect: document.getElementById('autoReconnect'),
          lowLatency: document.getElementById('lowLatency'),
          bufferSize: document.getElementById('bufferSize'),
          maxRetries: document.getElementById('maxRetries'),
          customHeaders: document.getElementById('customHeaders'),
          description: document.getElementById('description'),
          resetForm: document.getElementById('resetForm'),
          quickStream: document.getElementById('quickStream'),
          quickTestBtn: document.getElementById('quickTestBtn'),
          checkServerBtn: document.getElementById('checkServerBtn'),
          generateCmdBtn: document.getElementById('generateCmdBtn'),
          configItems: document.getElementById('configItems'),
          configCount: document.getElementById('configCount'),
          exportBtn: document.getElementById('exportBtn'),
          importBtn: document.getElementById('importBtn'),
          importFile: document.getElementById('importFile'),
          selectFileBtn: document.getElementById('selectFileBtn'),
          advancedToggle: document.getElementById('advancedToggle'),
          advancedContent: document.getElementById('advancedContent'),
          serverStatus: document.getElementById('serverStatus'),
          generatedCmd: document.getElementById('generatedCmd'),
          cmdOutput: document.getElementById('cmdOutput'),
          copyCmdBtn: document.getElementById('copyCmdBtn')
        };
      }

      bindEvents() {
        this.elements.configForm.addEventListener('submit', (e) => {
          e.preventDefault();
          this.saveConfig();
        });

        this.elements.resetForm.addEventListener('click', () => this.resetForm());
        this.elements.quickTestBtn.addEventListener('click', () => this.quickTest());
        this.elements.checkServerBtn.addEventListener('click', () => this.checkServer());
        this.elements.generateCmdBtn.addEventListener('click', () => this.generatePushCommand());
        this.elements.exportBtn.addEventListener('click', () => this.exportConfigs());
        this.elements.importBtn.addEventListener('click', () => this.elements.importFile.click());
        this.elements.selectFileBtn.addEventListener('click', () => this.elements.importFile.click());
        this.elements.importFile.addEventListener('change', (e) => this.importConfigs(e));
        this.elements.copyCmdBtn.addEventListener('click', () => this.copyCommand());

        this.elements.advancedToggle.addEventListener('click', () => {
          const content = this.elements.advancedContent;
          const icon = this.elements.advancedToggle.querySelector('i');

          content.classList.toggle('show');
          icon.className = content.classList.contains('show') ?
            'fas fa-chevron-up' : 'fas fa-chevron-down';
        });

        // 预设流按钮
        document.querySelectorAll('[data-stream]').forEach(btn => {
          btn.addEventListener('click', (e) => {
            const streamName = e.target.dataset.stream;
            this.testStream(streamName);
          });
        });
      }

      loadConfigs() {
        const saved = localStorage.getItem('streamConfigs');
        return saved ? JSON.parse(saved) : [];
      }

      saveConfigs() {
        localStorage.setItem('streamConfigs', JSON.stringify(this.configs));
      }

      saveConfig() {
        const config = {
          id: Date.now(),
          name: this.elements.configName.value,
          streamName: this.elements.streamName.value,
          protocol: this.elements.protocol.value,
          serverUrl: this.elements.serverUrl.value,
          autoReconnect: this.elements.autoReconnect.checked,
          lowLatency: this.elements.lowLatency.checked,
          bufferSize: parseInt(this.elements.bufferSize.value),
          maxRetries: parseInt(this.elements.maxRetries.value),
          customHeaders: this.elements.customHeaders.value,
          description: this.elements.description.value,
          createdAt: new Date().toISOString(),
          lastUsed: null
        };

        this.configs.push(config);
        this.saveConfigs();
        this.renderConfigs();
        this.resetForm();
        this.showToast('配置已保存', 'success');
      }

      deleteConfig(id) {
        if (confirm('确定要删除这个配置吗？')) {
          this.configs = this.configs.filter(config => config.id !== id);
          this.saveConfigs();
          this.renderConfigs();
          this.showToast('配置已删除', 'success');
        }
      }

      editConfig(id) {
        const config = this.configs.find(c => c.id === id);
        if (config) {
          this.elements.configName.value = config.name;
          this.elements.streamName.value = config.streamName;
          this.elements.protocol.value = config.protocol;
          this.elements.serverUrl.value = config.serverUrl;
          this.elements.autoReconnect.checked = config.autoReconnect;
          this.elements.lowLatency.checked = config.lowLatency;
          this.elements.bufferSize.value = config.bufferSize;
          this.elements.maxRetries.value = config.maxRetries;
          this.elements.customHeaders.value = config.customHeaders;
          this.elements.description.value = config.description;

          // 删除原配置，下次保存会创建新的
          this.deleteConfig(id);

          // 滚动到表单
          this.elements.configForm.scrollIntoView({ behavior: 'smooth' });
        }
      }

      testConfig(id) {
        const config = this.configs.find(c => c.id === id);
        if (config) {
          // 更新最后使用时间
          config.lastUsed = new Date().toISOString();
          this.saveConfigs();
          this.renderConfigs();

          this.testStream(config.streamName, config);
        }
      }

      testStream(streamName, config = null) {
        const url = `index.html?stream=${encodeURIComponent(streamName)}`;

        if (config) {
          // 将配置保存到sessionStorage供播放器使用
          sessionStorage.setItem('currentStreamConfig', JSON.stringify(config));
        }

        window.open(url, '_blank');
        this.showToast(`正在测试流: ${streamName}`, 'info');
      }

      quickTest() {
        const streamName = this.elements.quickStream.value.trim();
        if (streamName) {
          this.testStream(streamName);
          this.elements.quickStream.value = '';
        } else {
          this.showToast('请输入流名称', 'error');
        }
      }

      async checkServer() {
        const serverUrl = this.elements.serverUrl.value;
        const statusDiv = this.elements.serverStatus;

        statusDiv.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 检查中...';

        try {
          const response = await fetch(`http://${serverUrl}/api/streams`, {
            method: 'GET',
            timeout: 5000
          });

          if (response.ok) {
            const data = await response.json();
            statusDiv.innerHTML = `
                <div style="color: #4CAF50;">
                    <i class="fas fa-check-circle"></i> 
                    服务正常 (${Object.keys(data).length} 个活跃流)
                </div>
            `;
          } else {
            throw new Error('服务响应异常');
          }
        } catch (error) {
          statusDiv.innerHTML = `
              <div style="color: #f44336;">
                  <i class="fas fa-times-circle"></i> 
                  连接失败: ${error.message}
              </div>
          `;
        }
      }

      generatePushCommand() {
        const streamName = this.elements.streamName.value || 'demo';
        const serverUrl = this.elements.serverUrl.value;

        const commands = [
          '# FFmpeg 推流命令:',
          `ffmpeg -re -i input.mp4 -c copy -f flv rtmp://${serverUrl}/live/${streamName}`,
          '',
          '# OBS 推流地址:',
          `服务器: rtmp://${serverUrl}/live`,
          `推流码: ${streamName}`,
          '',
          '# 播放地址:',
          `FLV: http://${serverUrl}/live/${streamName}.flv`,
          `HLS: http://${serverUrl}/live/${streamName}/index.m3u8`
        ].join('\n');

        this.elements.cmdOutput.value = commands;
        this.elements.generatedCmd.style.display = 'block';
      }

      copyCommand() {
        this.elements.cmdOutput.select();
        document.execCommand('copy');
        this.showToast('命令已复制到剪贴板', 'success');
      }

      resetForm() {
        this.elements.configForm.reset();
        this.elements.serverUrl.value = 'localhost:8000';
        this.elements.bufferSize.value = '128';
        this.elements.maxRetries.value = '5';
      }

      renderConfigs() {
        const container = this.elements.configItems;
        container.innerHTML = '';

        if (this.configs.length === 0) {
          container.innerHTML = `
              <div style="text-align: center; padding: 40px; color: #6c757d;">
                  <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 15px;"></i>
                  <p>还没有配置，<a href="#" onclick="document.getElementById('configName').focus()">添加第一个配置</a></p>
              </div>
          `;
          this.elements.configCount.textContent = '0';
          return;
        }

        this.configs.forEach(config => {
          const configItem = document.createElement('div');
          configItem.className = 'config-item';

          const lastUsed = config.lastUsed ?
            new Date(config.lastUsed).toLocaleString() : '从未使用';

          configItem.innerHTML = `
              <div class="config-header">
                  <div class="config-name">${config.name}</div>
                  <div class="config-actions">
                      <button class="btn btn-success" onclick="configManager.testConfig(${config.id})" title="测试配置">
                          <i class="fas fa-play"></i>
                      </button>
                      <button class="btn btn-secondary" onclick="configManager.editConfig(${config.id})" title="编辑配置">
                          <i class="fas fa-edit"></i>
                      </button>
                      <button class="btn btn-danger" onclick="configManager.deleteConfig(${config.id})" title="删除配置">
                          <i class="fas fa-trash"></i>
                      </button>
                  </div>
              </div>
              <div class="config-details">
                  <div class="detail-item">
                      <span class="detail-label">流名称:</span>
                      <span>${config.streamName}</span>
                  </div>
                  <div class="detail-item">
                      <span class="detail-label">协议:</span>
                      <span>${config.protocol.toUpperCase()}</span>
                  </div>
                  <div class="detail-item">
                      <span class="detail-label">服务器:</span>
                      <span>${config.serverUrl}</span>
                  </div>
                  <div class="detail-item">
                      <span class="detail-label">最后使用:</span>
                      <span>${lastUsed}</span>
                  </div>
                  ${config.description ? `
                      <div class="detail-item" style="grid-column: 1 / -1;">
                          <span class="detail-label">描述:</span>
                          <span>${config.description}</span>
                      </div>
                  ` : ''}
              </div>
          `;

          container.appendChild(configItem);
        });

        this.elements.configCount.textContent = this.configs.length;
      }

      exportConfigs() {
        const dataStr = JSON.stringify(this.configs, null, 2);
        const blob = new Blob([dataStr], { type: 'application/json' });
        const url = URL.createObjectURL(blob);

        const a = document.createElement('a');
        a.href = url;
        a.download = `stream-configs-${new Date().toISOString().split('T')[0]}.json`;
        a.click();

        URL.revokeObjectURL(url);
        this.showToast('配置已导出', 'success');
      }

      importConfigs(event) {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = (e) => {
          try {
            const importedConfigs = JSON.parse(e.target.result);

            if (Array.isArray(importedConfigs)) {
              // 为导入的配置生成新的ID
              importedConfigs.forEach(config => {
                config.id = Date.now() + Math.random();
              });

              this.configs.push(...importedConfigs);
              this.saveConfigs();
              this.renderConfigs();
              this.showToast(`成功导入 ${importedConfigs.length} 个配置`, 'success');
            } else {
              throw new Error('文件格式无效');
            }
          } catch (error) {
            this.showToast('导入失败: ' + error.message, 'error');
          }
        };

        reader.readAsText(file);
        event.target.value = ''; // 清除文件选择
      }

      loadDefaultConfigs() {
        if (this.configs.length === 0) {
          const defaultConfigs = [
            {
              id: 1,
              name: '本地开发环境',
              streamName: 'demo',
              protocol: 'flv',
              serverUrl: 'localhost:8000',
              autoReconnect: true,
              lowLatency: true,
              bufferSize: 128,
              maxRetries: 5,
              customHeaders: '',
              description: '本地开发测试用的默认配置',
              createdAt: new Date().toISOString(),
              lastUsed: null
            },
            {
              id: 2,
              name: '测试环境',
              streamName: 'test',
              protocol: 'flv',
              serverUrl: 'localhost:8000',
              autoReconnect: true,
              lowLatency: false,
              bufferSize: 256,
              maxRetries: 3,
              customHeaders: '',
              description: '测试环境专用配置',
              createdAt: new Date().toISOString(),
              lastUsed: null
            }
          ];

          this.configs = defaultConfigs;
          this.saveConfigs();
          this.renderConfigs();
        }
      }

      showToast(message, type = 'info') {
        const toast = document.createElement('div');
        toast.className = `toast toast-${type}`;
        toast.textContent = message;

        document.body.appendChild(toast);

        setTimeout(() => toast.classList.add('show'), 100);
        setTimeout(() => {
          toast.classList.remove('show');
          setTimeout(() => document.body.removeChild(toast), 300);
        }, 3000);
      }
    }

    // 初始化配置管理器
    document.addEventListener('DOMContentLoaded', () => {
      window.configManager = new StreamConfigManager();
    });
  </script>
</body>

</html>