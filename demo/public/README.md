# Live Stream Test Platform

一个专业的直播流测试平台，提供完整的客户端测试、配置管理和性能监控功能。

## 🎯 主要功能

### 1. 直播播放器 (`index.html`)
- **现代化UI设计** - 美观的界面和用户体验
- **多协议支持** - FLV、HLS、RTMP等流媒体协议
- **实时统计** - 码率、帧率、缓冲、丢帧等关键指标
- **智能控制** - 自动重连、错误恢复、质量调节
- **便捷功能** - 截图保存、全屏播放、音量控制
- **调试工具** - 实时日志、连接状态监控

### 2. 配置管理 (`config.html`)
- **配置预设** - 创建和管理多个流配置
- **快速测试** - 一键启动不同配置的测试
- **批量操作** - 导入/导出配置文件
- **推流助手** - 生成FFmpeg和OBS推流命令
- **服务检查** - 实时检测流媒体服务器状态

### 3. 性能监控 (`monitor.html`)
- **实时监控** - 网络、质量、系统资源监控
- **可视化图表** - 动态性能趋势图
- **健康评分** - 自动计算系统健康状况
- **系统诊断** - 一键运行完整的系统检测
- **日志管理** - 实时日志查看和导出

## 🚀 快速开始

### 1. 基本使用
1. 打开 `index.html` 开始直播测试
2. 输入流名称（默认: demo）
3. 选择协议类型（推荐: FLV）
4. 点击"开始播放"

### 2. 配置管理
1. 点击"配置管理"进入配置页面
2. 添加新的流配置
3. 保存并测试配置
4. 导出配置供其他环境使用

### 3. 性能监控
1. 点击"性能监控"进入监控页面
2. 点击"开始监控"开始实时监控
3. 运行"系统诊断"检查问题
4. 导出日志进行分析

## 🛠️ 高级功能

### 键盘快捷键
- `空格键` - 播放/暂停
- `F键` - 全屏切换

### 自动功能
- **智能重连** - 连接断开时自动尝试重连
- **质量适配** - 根据网络状况自动调节质量
- **错误恢复** - 自动处理常见的播放错误
- **缓存优化** - 智能缓存管理减少延迟

### 诊断工具
- **网络连接测试** - 检查网络连通性
- **服务器可达性** - 验证流媒体服务器状态
- **浏览器兼容性** - 检查浏览器支持情况
- **编码器支持** - 验证视频编码器兼容性
- **带宽测试** - 评估网络带宽质量
- **延迟测试** - 测量网络延迟情况

## 📊 监控指标说明

### 连接状态
- **延迟** - 网络往返时间
- **重连次数** - 自动重连发生次数
- **连接质量** - 基于延迟和丢包率的综合评分

### 网络性能
- **带宽** - 可用网络带宽
- **丢包率** - 数据包丢失百分比
- **抖动** - 网络延迟变化情况
- **吞吐量** - 实际数据传输速率

### 流媒体质量
- **码率** - 视频比特率
- **帧率** - 视频帧数每秒
- **分辨率** - 视频分辨率
- **丢帧数** - 播放过程中丢失的帧数

### 系统资源
- **CPU使用率** - 处理器使用情况
- **内存使用率** - 内存占用情况
- **缓冲水平** - 播放缓冲区状态
- **网络速度** - 当前网络传输速度

## 🔧 配置选项

### 基本配置
- **流名称** - 直播流的标识符
- **协议类型** - 支持FLV、HLS、RTMP、WebRTC
- **服务器地址** - 流媒体服务器URL
- **自动重连** - 是否启用自动重连功能
- **低延迟模式** - 是否优化延迟

### 高级配置
- **缓冲区大小** - 播放缓冲区大小（KB）
- **最大重试次数** - 连接失败最大重试次数
- **自定义头部** - HTTP请求自定义头部
- **描述信息** - 配置说明文字

## 🎨 界面说明

### 播放器界面
- **视频区域** - 主播放窗口，支持全屏
- **控制按钮** - 播放、停止、刷新、截图等
- **音量控制** - 音量滑块和静音控制
- **质量选择** - 自动、高清、标清、流畅
- **统计面板** - 实时播放统计信息
- **日志窗口** - 详细的操作日志

### 配置界面
- **配置表单** - 新建和编辑配置
- **快速测试** - 一键测试功能
- **配置列表** - 管理所有保存的配置
- **导入导出** - 配置文件管理

### 监控界面
- **概览面板** - 系统整体状况
- **监控卡片** - 各项指标的详细显示
- **图表区域** - 实时性能趋势
- **诊断报告** - 系统健康检查结果

## 🔍 故障排除

### 常见问题

**播放失败**
1. 检查流名称是否正确
2. 确认服务器地址是否可达
3. 尝试切换协议类型
4. 查看浏览器控制台错误信息

**连接不稳定**
1. 检查网络连接质量
2. 调整缓冲区大小
3. 启用自动重连功能
4. 使用性能监控分析问题

**画质问题**
1. 检查网络带宽是否充足
2. 尝试降低质量等级
3. 查看丢帧和码率统计
4. 检查服务器性能

**浏览器兼容性**
1. 使用现代浏览器（Chrome、Firefox、Edge）
2. 确保浏览器支持HTML5视频
3. 检查是否启用了硬件加速
4. 尝试禁用浏览器扩展

### 调试建议

1. **启用详细日志** - 观察播放器日志输出
2. **使用性能监控** - 实时查看系统状态
3. **运行系统诊断** - 检查环境配置
4. **对比不同配置** - 找出最佳设置
5. **记录问题现象** - 便于问题复现和解决

## 📝 开发说明

### 技术栈
- **前端** - HTML5、CSS3、JavaScript ES6+
- **视频播放** - FLV.js、原生Video API
- **图表库** - Chart.js
- **图标库** - Font Awesome
- **存储** - localStorage、sessionStorage

### 文件结构
```
demo/public/
├── index.html      # 主播放器页面
├── config.html     # 配置管理页面
├── monitor.html    # 性能监控页面
├── flv.min.js      # FLV播放器库
└── README.md       # 使用说明文档
```

### 自定义开发
- 修改CSS变量调整主题色彩
- 扩展监控指标和图表类型
- 添加新的协议支持
- 集成更多诊断工具

## 🤝 贡献指南

欢迎提交问题报告和功能建议！

1. 描述问题或建议的详细信息
2. 提供复现步骤（如果是bug）
3. 说明期望的行为
4. 提供环境信息（浏览器、操作系统等）

## 📄 许可证

本项目采用 MIT 许可证，详情请查看 LICENSE 文件。 